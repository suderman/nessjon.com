// Generated by CoffeeScript 1.4.0
(function(){(function(e){e.fn.countDown=function(t){var n,r,i;n=e(this);r={};e.extend(r,t);i=this.setCountDown(r);r.onComplete&&n.data("callback",r.onComplete);r.omitWeeks&&n.data("omitWeeks",r.omitWeeks);n.find("div").html("<span></span><span></span>");n.doCountDown(i,500);return this};e.fn.stopCountDown=function(){return clearTimeout(e(this).data("timer"))};e.fn.startCountDown=function(){return this.doCountDown(e(this).data("diffSecs"),500)};e.fn.setCountDown=function(t){var n,r,i;i=new Date;if(t.targetDate)i=new Date(t.targetDate.month+"/"+t.targetDate.day+"/"+t.targetDate.year+" "+t.targetDate.hour+":"+t.targetDate.min+":"+t.targetDate.sec+(t.targetDate.utc?" UTC":""));else if(t.targetOffset){i.setFullYear(t.targetOffset.year+i.getFullYear());i.setMonth(t.targetOffset.month+i.getMonth());i.setDate(t.targetOffset.day+i.getDate());i.setHours(t.targetOffset.hour+i.getHours());i.setMinutes(t.targetOffset.min+i.getMinutes());i.setSeconds(t.targetOffset.sec+i.getSeconds())}r=new Date;n=Math.floor((i.valueOf()-r.valueOf())/1e3);e(this).data("diffSecs",n);return n};e.fn.doCountDown=function(t,n){var r,i,s,o,u,a,f,l;r=e(this);if(t<=0){t=0;r.data("timer")&&clearTimeout(r.data("timer"))}a=t%60;u=Math.floor(t/60)%60;o=Math.floor(t/60/60)%24;if(r.data("omitWeeks")===!0){s=Math.floor(t/60/60/24);l=Math.floor(t/60/60/24/7)}else{s=Math.floor(t/60/60/24)%7;l=Math.floor(t/60/60/24/7)}r.dashChangeTo("seconds",a,n?n:800);r.dashChangeTo("minutes",u,n?n:1200);r.dashChangeTo("hours",o,n?n:1200);r.dashChangeTo("days",s,n?n:1200);r.dashChangeTo("weeks",l,n?n:1200);r.data("diffSecs",t);if(t>0){f=setTimeout(function(){return r.doCountDown(t-1)},1e3);return r.data("timer",f)}if(i=r.data("callback"))return r.data("callback")()};e.fn.dashChangeTo=function(t,n,r){var i,s,o,u;i=e(this);o=i.find("figure."+t+" div").length-1;u=[];while(o>=0){s=n%10;n=(n-s)/10;i.digitChangeTo(i.find("."+t+" div:eq("+o+")"),s,r);u.push(o--)}return u};return e.fn.digitChangeTo=function(e,t,n){n||(n=800);if(e.find("span:first").html()!==t+""){e.find("span:first").hide().html(t?t:"0").slideDown(n);return e.find("span:last").animate({height:""},n,function(){e.find("span:last").html(e.find("span:first").html()).show().css({height:""});return e.find("span:first").hide().slideUp(10)})}}})(jQuery)}).call(this);